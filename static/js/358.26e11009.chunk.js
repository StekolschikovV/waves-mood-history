(self.webpackChunkwaves_mood_hostory=self.webpackChunkwaves_mood_hostory||[]).push([[358],{2322:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var o=t(1413),r=t(2982),s=t(4165),i=t(5861),l=t(885),c={moodCanvasWrapper:"style_moodCanvasWrapper__X2RkM",moodCanvas:"style_moodCanvas__yZGyq",innerContainer:"style_innerContainer__DxoJA",text:"style_text__LR1oy",colorList:"style_colorList__ePnh7",colorElement:"style_colorElement__7Mv7o",colorElementSelected:"style_colorElementSelected__JbpO0",canvaWrapper:"style_canvaWrapper__wytE4",canva:"style_canva__oC2rC",canvaRow:"style_canvaRow__fZpy4",canvaElement:"style_canvaElement__M2FZ0",controls:"style_controls__7dNJA",btnGroup:"style_btnGroup__Dh4oD",btn:"style_btn__id0h3",pixelUsed:"style_pixelUsed__fxVH8",selectedTokenTitle:"style_selectedTokenTitle__JOGLp",selectedTokenWrapper:"style_selectedTokenWrapper__sObL7",selectedTokenSelected:"style_selectedTokenSelected__NX0Aw",historyLine:"style_historyLine__uvHz5",historyStep:"style_historyStep__wup8X",historyStepSelected:"style_historyStepSelected__2U0Hc"},a=t(2791),u=t(8186),d=t(7937),h=t(6431),p=t.n(h),v=t(8174),m=t(184);function f(e){var n=e.data,t=(0,a.useState)("USDT"),h=(0,l.Z)(t,2),f=h[0],y=h[1],_=(0,a.useState)("blue"),g=(0,l.Z)(_,2),k=g[0],x=g[1],S=(0,a.useState)([]),w=(0,l.Z)(S,2),j=w[0],C=w[1],b=(0,a.useState)([]),N=(0,l.Z)(b,2),T=N[0],E=N[1],W=(0,a.useState)(!1),Z=(0,l.Z)(W,2),U=Z[0],D=Z[1],A=(0,a.useState)([]),L=(0,l.Z)(A,2),X=L[0],H=L[1],O=(0,a.useState)("now"),P=(0,l.Z)(O,2),R=P[0],M=P[1],J=new u.Signer({NODE_URL:"https://nodes.wavesnodes.com"}),G=new d.x;J.setProvider(G);var q=function(e){return e.split("|").filter((function(e){return!!e})).map((function(e){var n=e.split("-");return{color:n[0],width:+n[1],height:+n[2]}}))},Y=function(e,n){var t;return(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?T:j).forEach((function(o){o.width===e&&o.height===n&&(t=o.color)})),t||!1},B=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"34N9YcEETLWn93qYQ64EsP1x89tSruJU44RrEMSXXEPJ","6XtHjpXbs9RRJP2Sr9GUyVqzACcby9TkThHXnjVC5CDJ",n={dApp:"3PAmW4yzC5W9paLoBUN1K5CZU4dfMM4fkWE",fee:5e5,payment:[{assetId:"USDT"===f?"34N9YcEETLWn93qYQ64EsP1x89tSruJU44RrEMSXXEPJ":"6XtHjpXbs9RRJP2Sr9GUyVqzACcby9TkThHXnjVC5CDJ",amount:1e4*T.length}],call:{function:"draw",args:[{type:"list",value:T.map((function(e){return"".concat(e.color,"-").concat(e.width,"-").concat(e.height)})).map((function(e){return{type:"string",value:e}}))}]}},e.next=5,J.invoke(n).broadcast().then((function(e){var n;e&&16===(null===(n=e[0])||void 0===n?void 0:n.type)?(0,v.Am)("Request sent successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):(0,v.Am)("An error occurred, please check your wallet!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),console.log(e)})).catch((function(e){var n;console.log("error",e),null!==e&&void 0!==e&&null!==(n=e.message)&&void 0!==n&&n.includes("WavesKeeper is not installed.. This is not error of signer")?(0,v.Am)("WavesKeeper not found! You need to install a WavesKeeper to use the app!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}):(0,v.Am)(null===e||void 0===e?void 0:e.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),E([])}));case 5:setTimeout((function(){E([])}),7e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){if(T.length<60){var n=T.filter((function(n){return!(n.height===e.height&&n.width===e.width)}));E([].concat((0,r.Z)(n),[e]))}else(0,v.Am)("60 pixels max per transaction!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},z=(0,a.useState)(!1),K=(0,l.Z)(z,2),Q=K[0],F=K[1];(0,a.useEffect)((function(){if(n){var e=n.filter((function(e){return e.key.includes("log_")})).map((function(e){return e.key.replaceAll("_","").length>0?(0,o.Z)((0,o.Z)({},e),{},{key:"".concat(e.key.split("_")[0],"_").concat(e.key.split("_")[1])}):e})).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=!1;return void 0===e.length?[e,n]:(null===e||void 0===e||e.forEach((function(e){e.key===n.key&&(t=!0)})),t?e.map((function(e){return e.key!==n.key?e:(0,o.Z)((0,o.Z)({},e),{},{value:e.value+"|"+n.value})})):[].concat((0,r.Z)(e),[n]))}));C(q(n.filter((function(e){return e.key.includes("-")})).map((function(e){return"|".concat(e.value,"-").concat(e.key)})).join(""))),H(e);var t=document.querySelector(".historyLine");!Q&&t&&(F(!0),setTimeout((function(){t.scrollLeft=null===t||void 0===t?void 0:t.scrollWidth}),3e3))}}),[n]);var I=null===X||void 0===X?void 0:X.map((function(e){var n;return+(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.split("_")[1])})).sort((function(e,n){return e-n}));function $(e){var n=[];X.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{id:+e.key.split("_")[1]})})).filter((function(n){return"now"===e||n.id<=e})).sort((function(e,n){return e.id-n.id})).map((function(e){var t=q(e.value);n=n.concat(t)})),M(e),C(n)}return(0,m.jsxs)("div",{className:c.moodCanvasWrapper,id:"mood-canvas",children:[(0,m.jsxs)("div",{className:"container ".concat(c.moodCanvas),children:[(0,m.jsx)("div",{className:"title",children:"Mood canvas"}),(0,m.jsxs)("div",{className:c.innerContainer,children:[(0,m.jsxs)("div",{className:c.text,children:["This drawing will be permanently stored in the blockchain on behalf of your account. Try to express your emotions by answering the following questions:",(0,m.jsxs)("ul",{children:[(0,m.jsx)("li",{children:"What is your waves mood today?"}),(0,m.jsx)("li",{children:"What would you like to be recorded in history today?"}),(0,m.jsx)("li",{children:"How would you describe your current state of mind?"}),(0,m.jsx)("li",{children:"What thoughts or memories are evoking strong emotions within you right now?"})]})]}),(0,m.jsxs)("div",{className:c.canvaWrapper,children:[(0,m.jsx)("ul",{className:c.colorList,children:["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"].map((function(e){return(0,m.jsx)("li",{className:"".concat(c.colorElement," ").concat(k===e&&c.colorElementSelected),style:{background:e},onClick:function(n){return x(e)}},e)}))}),(0,m.jsx)("div",{onMouseDown:function(){return D(!0)},onMouseUp:function(){return D(!1)},className:c.canva,children:Array.from({length:100}).map((function(e,n){return(0,m.jsx)("div",{className:c.canvaRow,children:Array.from({length:100}).map((function(e,t){var o=Y(n,t,!1),r="now"===R?Y(n,t,!0):[],s="none";return"string"===typeof r?s=r:"string"===typeof o&&(s=o),(0,m.jsx)("div",{className:"".concat(c.canvaElement),style:{background:s},onClick:function(){return V({width:n,height:t,color:k})},onMouseEnter:function(){U&&V({width:n,height:t,color:k})}},"".concat(n).concat(t))}))},"".concat(n))}))})]}),(0,m.jsxs)("div",{className:c.controls,children:[(0,m.jsxs)("div",{className:c.selectedToken,children:[(0,m.jsx)("div",{className:c.selectedTokenTitle,children:"Payment in token:"}),(0,m.jsxs)("div",{className:c.selectedTokenWrapper,children:[(0,m.jsx)("span",{onClick:function(e){return y("USDT")},className:"USDT"===f?c.selectedTokenSelected:"",children:"USDT-WXG"}),(0,m.jsx)("span",{onClick:function(e){return y("USDC")},className:"USDC"===f?c.selectedTokenSelected:"",children:"USDC-WXG"})]})]}),(0,m.jsxs)("div",{className:c.pixelUsed,children:[T.length,(0,m.jsx)("span",{children:"pixels used"})]}),(0,m.jsxs)("div",{className:c.btnGroup,children:[(0,m.jsx)("button",{className:c.btn,children:"Refresh"}),(0,m.jsx)("button",{className:c.btn,onClick:function(){E(T.filter((function(e,n,t){return n!==t.length-1})))},children:"Undo last"}),(0,m.jsx)("button",{disabled:0===T.length,className:c.btn,onClick:function(){return B()},children:"Save and burn WXG"})]})]})]})]}),(0,m.jsx)("div",{className:"container-full",children:(0,m.jsxs)("ul",{className:"historyLine ".concat(c.historyLine),children:[I.map((function(e,n){return(0,m.jsxs)("li",{className:"".concat(c.historyStep," ").concat(e===R&&c.historyStepSelected),onClick:function(){return $(e)},children:[(0,m.jsx)("div",{children:(0,m.jsx)(p(),{format:"YYYY/MM/DD",children:e})}),(0,m.jsx)("span",{children:(0,m.jsx)(p(),{format:"HH:mm",children:e})})]},"".concat(e,"-").concat(n))})),(0,m.jsx)("li",{onClick:function(){return $("now")},className:"historyStepNow ".concat(c.historyStep," ").concat("now"===R&&c.historyStepSelected),children:(0,m.jsx)("div",{children:"NOW"})},"now")]})})]})}},5819:function(){}}]);
//# sourceMappingURL=358.26e11009.chunk.js.map